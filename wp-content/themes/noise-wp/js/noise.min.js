var Noise=Noise||{};!function(e){e.expr[":"].onScreen=function(i){var t=Noise.$window.scrollTop(),n=t+Noise.wHeight,s=e(i),a=s.offset().top,o=s.height(),l=a+o;return a>=t&&n>a||l>t&&n>=l||o>Noise.wHeight&&t>=a&&l>=n},e.fn.isOnTopScreen=function(e){("undefined"==typeof e||null===e)&&(e=0);var i={top:Noise.$window.scrollTop(),left:Noise.$window.scrollLeft()};i.right=i.left+Noise.wWidth,i.bottom=i.top+Noise.wHeight,i.top+=e;var t=this.offset();return t.right=t.left+this.outerWidth(),t.bottom=t.top+this.outerHeight(),!(i.right<t.left||i.left>t.right||i.bottom<t.top||i.top>t.bottom)&&t.top<i.top},Noise.sharrre=function(i){i=i?i:document;var t=e(i);t.find(".social-likes").socialLikes()},Noise.imageSlideShowInit=function(){e("#images-gallery-slideshow").flexslider({animation:"slide",animationLoop:!0,easing:"easeInOutExpo",slideshow:!0,controlNav:!1,directionNav:!0,touch:!0,start:function(i){var t=i.count;t=10>t?"0"+t:t,e(".total-slides").text(t),1>=t&&e(i).find(".flex-direction-nav").hide()},after:function(i){var t=i.currentSlide+1;t=10>t?"0"+t:t,e(".current-slide").text(t)}})},Noise.openImagesLightBox=function(i,t){var n=e(".inner").first().width(),s=540/1150;e(i).colorbox({ajax:!0,href:noiseVars.ajax_url,data:{action:"noise_get_images_gallery",id:t},width:n,height:s*n+51,fixed:!0,close:'<span class="entypo-cross close"></span>',onComplete:function(){Noise.imageSlideShowInit(),Noise.sharrre("#cboxLoadedContent")}})},Noise.initScrollBar=function(i){var t,n=e(i);if(n.mCustomScrollbar("destroy"),n.mCustomScrollbar({scrollButtons:{enable:!0}}),n.hasClass("top-scroll-bar")){t=n.prev(".custom-scroll-nav");var s=n.find(".mCSB_scrollTools");if(s.length&&"none"==s[0].style.display)return t.hide(),void 0;t.show(),t.length||(n.before('<div class="custom-scroll-nav"><span class="scroll-up entypo-arrow-up4"></span><span class="scroll-down entypo-arrow-down5"></span></div>'),t=n.prev(".custom-scroll-nav")),t.on("click","span",function(i){i.preventDefault();var t=e(this).hasClass("scroll-up")?"up":"down",s=100,a=Math.abs(parseInt(n.find(".mCSB_container").position().top)),o="up"==t?Math.max(0,a-s):a+s;n.mCustomScrollbar("scrollTo",o)})}},Noise.updateScrollBar=function(i,t){var n=e(i);n.mCustomScrollbar("update"),t&&n.mCustomScrollbar("scrollTo","top")},e(function(){function i(){if(!noiseVars.isMobile){var i=Noise.$body.hasClass("sticky-nav")?Noise.navHeight:0,t=!1;u.each(function(){var n=this.hash;if(""!=n&&this.baseURI==f&&!t){u.removeClass("active");var s=e(n);s.length&&s.isOnTopScreen(i)&&(e(this).addClass("active"),t=!0)}})}}var t=e("#artists-slider"),n=e("#section-events"),s=e("#releases"),a={axis:"y",infinite:!1,easing:"easeInOutExpo"};e(".scroll-pane").each(function(){Noise.initScrollBar(this)}),e("#tweets-slider").flexslider({animation:"slide",slideshow:noiseVars.tweetsAuto,easing:"easeInOutExpo",directionNav:!1,useCSS:Noise.useCSSTransition}),e("#quotes-slider").flexslider({animation:"slide",slideshow:noiseVars.quotesAuto,easing:"easeInOutExpo",directionNav:!1,useCSS:Noise.useCSSTransition}),e("#latest-tracks-slider").tinycarousel(a),e("#media-photos-slider").tinycarousel(a),e("#media-videos-slider").tinycarousel(a),e("#products-slider").tinycarousel(a);var o=e(".tabs-title");o.each(function(){var i=e(this),t=i.find(".section-title"),n=t.find(".desc"),s=n.text();n.length&&(n[0].style.left=n.position().left+"px"),i.on("click",".tabs-nav a",function(i){i.preventDefault();var t=e(this),a=t.text();t.parent("li").is(":first-child")&&(a=s),n.stop(!0,!0).hide().text(a).fadeIn()})}),e(".open-gallery").on("click",function(i){i.preventDefault(),e(".video .parallax").css("position"," static "),Noise.openImagesLightBox(this,e(this).data("id"))}),Noise.$body.on("click","#cboxClose",function(){e(".video .parallax").css("position"," absolute ")}),e("#upcoming-events").tinycarousel(a),e("#past-events").tinycarousel(a),n.on("click",".infor-event",function(){function i(){if(!noiseVars.isMobile&&!a.is(":onScreen")){var e=a.offset().top+2*a.height()-Noise.wHeight;Noise.$HtmlBody.animate({scrollTop:e},{duration:500,easing:"easeInOutExpo"})}}var t=e(this),s=t.next().text(),a=n.find(".content-infor-event");if(t.hasClass("active")){var o=a.is(":onScreen")?500:0;return a.stop(!0,!0).slideUp(o,function(){a.children(".show-infor-event").empty(),t.removeClass("active")}),void 0}if(n.find(".infor-event.active").removeClass("active"),t.addClass("active"),a.is(":visible"))a.children(".show-infor-event").hide().empty().html(s).fadeIn(),i();else{var o=a.is(":onScreen")?500:0;a.children(".show-infor-event").empty().html(s),a.stop(!0,!0).slideDown(o,i)}}),n.on("click",".close-infor",function(){e(this).parent(".content-infor-event").slideUp(),n.find(".infor-event.active").removeClass("active")});var l=e("#section-countdown");if(l.length&&l.hasClass("video")){var r=e("#countdown-video-bg"),d=l.outerWidth(),c=l.outerHeight();r.length&&r.mediaelementplayer({videoWidth:d,videoHeight:c,loop:!0,pauseOtherPlayers:!1,startVolume:0})}Noise.albumSlider=s.flexslider({animation:"slide",direction:"vertical",animationLoop:!1,easing:"easeInOutExpo",animationSpeed:600,slideshow:!1,controlNav:!1,touch:!1,useCSS:!1}),s.on("click",".flex-viewport .view-detail",function(i){i.preventDefault(),Noise.albumSlider.addClass("item-expanded");var t=e(this).parents("li"),n=Noise.albumSlider.data("share");n||(Noise.sharrre(Noise.albumSlider),Noise.albumSlider.data("share","true")),t.find(".album-cover").hide(),t.find(".hentry, .album-share").stop(!0,!0).fadeIn(800,function(){e(this).find(".scroll-pane").each(function(){Noise.initScrollBar(this)}),t.siblings("li").children(".album-cover").hide().siblings(".hentry, .album-share").show(0,function(){e(this).find(".scroll-pane").each(function(){Noise.initScrollBar(this)})})})}),s.on("click",".hide-detail",function(e){e.preventDefault(),Noise.albumSlider.find(".flex-viewport .album-cover").fadeIn().next(".hentry, .album-share").fadeOut(),Noise.albumSlider.removeClass("item-expanded")}),t.flexslider({animation:"slide",direction:"vertical",easing:"easeInOutExpo",animationSpeed:600,animationLoop:!1,slideshow:!1,controlNav:!1,directionNav:!0,touch:!1,useCSS:!1,start:function(i){i.count<=1&&i.directionNav.hide(),e(".artist-direction-nav").on("click","a",function(t){t.preventDefault();var n=e(this),s=n.parents(".artist-direction-nav");if(!n.hasClass("disable")&&!i.hasClass("item-moving")){var a,o=n.hasClass("artist-next")?"next":"prev",l=i.currentSlide,r=!1,d=e(i.slides[i.currentSlide]).children(".hentry:visible");if(i.addClass("item-moving"),"next"==o?(a=d.next(".hentry"),a.length<=0&&(r=!0,l++,a=e(i.slides[i.getTarget("next")]).children(".hentry:first-child"))):(a=d.prev(".hentry"),a.length<=0&&(r=!0,l--,a=e(i.slides[i.getTarget("prev")]).children(".hentry:last-child"))),r){{a.width()}a.addClass("active").show(),a.siblings(".hentry").addClass("hidden").hide(),i.flexslider(o),setTimeout(function(){Noise.wWidth<=800?0:30;d.removeClass("active").attr("style",""),d.siblings(".hentry").removeClass("hidden").attr("style",""),i.removeClass("item-moving")},i.vars.animationSpeed)}else{var c="next"==o?i.h:-i.h;a[0].style.position="absolute",a[0].style.top=c+"px",a.removeClass("hidden").addClass("active").show().children(".artist-info").show(),d[0].style.position="absolute",d[0].style.top=0,d.stop(!0,!0).animate({top:-c},i.vars.animationSpeed,"easeInOutExpo",function(){e(this).children(".artist-info").hide()}),a.stop(!0,!0).animate({top:0},i.vars.animationSpeed,"easeInOutExpo",function(){a.attr("style",""),d.removeClass("active").addClass("hidden").attr("style",""),i.removeClass("item-moving")})}n.siblings("a").removeClass("disable"),l==i.last&&a.next(".hentry").length<=0&&s.children(".artist-next").addClass("disable"),0==l&&a.prev(".hentry").length<=0&&s.children(".artist-prev").addClass("disable"),e(i).children(".view-artist-gallery").data("id",a.data("id")).text(a.find(".artist-gallery-link").text()),a.find(".scroll-pane").each(function(){Noise.initScrollBar(this,!0)})}})}}),t.on("click",".view-artist, .artist-thumbnail .overlay",function(i){function t(e){e&&s.addClass("active"),n.parents(".artist-thumbnail").next(".artist-info").fadeIn(500,function(){a.removeClass("item-expanding").addClass("item-expanded"),a.children(".hide-detail").fadeIn(500)}),a.children(".view-artist-gallery").data("id",n.data("id")).html(l).fadeIn(),s.find(".scroll-pane").each(function(){Noise.initScrollBar(this)})}i.preventDefault();var n=e(this),s=n.parents(".hentry"),a=n.parents(".artists-slider"),o=s.siblings(".hentry"),l=n.siblings(".artist-gallery-link").html();if(a.addClass("item-expanding"),o.length>0){var r=Noise.wWidth<=480?0:500;o.stop().animate({width:0,marginLeft:0},r,function(){e(this).addClass("hidden").hide().attr("style",""),t(!1)}),s.animate({marginLeft:0},500,function(){s.addClass("active")})}else t(!0);var d=a.find(".artist-direction-nav"),c=d.find(".artist-next"),h=d.find(".artist-prev"),v=s.next(".hentry"),f=s.prev(".hentry"),u=n.parents("li"),p=u.next("li"),m=u.prev("li");v.length<=0&&p.length<=1&&c.addClass("disable"),(f.length<=0||m.length<=0)&&h.addClass("disable"),(v.length>=1||p.length>=1)&&c.removeClass("disable"),(f.length>=1||m.length>=1)&&h.removeClass("disable")}),$artist_single=e(".artist-single"),$artist_single.find(".artist-thumbnail .overlay").trigger("click"),t.on("click",".hide-detail",function(i){i.preventDefault();var n=t.find(".flex-viewport .flex-active-slide").children(".hentry"),s=n.filter(":visible"),a=Noise.wWidth<=800?0:30;t.children(".view-artist-gallery").fadeOut(),s.children(".artist-info").fadeOut(300,function(){var i,s=e(this),o=s.parents(".hentry"),l=n.filter(".hidden"),r=l.not(":first-child");o.removeClass("active"),i=o.attr("style","").width(),r.length&&(r[0].style.marginLeft=a+"px"),l.show().animate({width:i},500,function(){l.removeClass("hidden").attr("style","")}),t.removeClass("item-expanded")})}),Noise.$window.resize(function(){var e=t.find(".slides .flex-active-slide");t.hasClass("item-expanded")||(t.find(".hentry").attr("style",""),e.is(":first-child")&&t.find(".artist-direction-nav .artist-prev").addClass("disable"),e.is(":last-child")&&t.find(".artist-direction-nav .artist-next").addClass("disable"))});{var h=e("#section-player"),v=h.find("#tracks-info");e("#section-slider").length?Noise.wHeight:0}e("#player-icon").on("click",function(){v.is(":visible")&&h.find(".mejs-info").trigger("click"),h.toggleClass("showdown")}),window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.host);var f=window.location.origin+window.location.pathname,u=Noise.$navMenu.find(".menu a");Noise.$window.on("scroll",function(){i()}),Noise.$navMenu.on("click",".menu a",function(i){var t,n=this.hash,s=e(this).attr("href");if(""!=n&&s.replace(n,"")==f){i.preventDefault();var a=e(n);if(a.length){var o=null;o=h.length?h.next():Noise.$navMenu.next(),t=a.offset().top-Noise.navHeight+2,a.get(0)!=o.get(0)||Noise.$body.hasClass("sticky-nav")||(t=t-Noise.navHeight-40),u.removeClass("active"),e(this).addClass("active"),Noise.$HtmlBody.stop().animate({scrollTop:t},{duration:1200,easing:"easeInOutExpo"})}}}),e(".logo a").on("click",function(e){e.preventDefault(),Noise.$HtmlBody.animate({scrollTop:0},{duration:1200,easing:"easeInOutExpo"})}),Noise.$window.resize(function(){var i=540/1150,t=e(".inner").first().width(),n=i*t+51;e.colorbox.resize({height:n,width:t})}),window.addEventListener("orientationchange",function(){e("#cboxOverlay").is(":visible")&&e.colorbox.load(!0)},!1)})}(jQuery);