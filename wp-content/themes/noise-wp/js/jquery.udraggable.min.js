!function(t){var e,n,i,o,a,s,r,u,d,l,p,_,m,h,c,g,f,v,x=t.event.special,b={},y=!1,w=-1,P="ue_bound",S=!1,E={bound_ns_map:{},wheel_ratio:15,px_radius:3,ignore_class:":input",tap_time:200,held_tap_time:300},q=[],z=1,$=4;u=function(t){var e,n=0;for(e=this.length;e;0)this[--e]===t&&n++;return n},d=function(t){var e,n=0;for(e=this.length;e;0)this[--e]===t&&(this.splice(e,1),n++,e++);return n},l=function(t){return u.call(this,t)?!1:(this.push(t),!0)},p=function(e){if(e&&t.isArray(e)){if(e.remove_val)return console.warn("The array appears to already have listPlus capabilities"),e}else e=[];return e.remove_val=d,e.match_val=u,e.push_uniq=l,e},e=p(),n={setup:function(n,i){var o,a,s,r,u,d=this,l=t(d),_={};if(!t.data(this,P)){for(o={},t.extend(!0,o,E),t.data(d,P,o),u=p(i.slice(0)),u.length&&""!==u[0]||(u=["000"]),a=0;a<u.length;a++)s=u[a],s&&(_.hasOwnProperty(s)||(_[s]=!0,r=".__ue"+s,l.bind("mousedown"+r,g),l.bind("touchstart"+r,f),l.bind("mousewheel"+r,v)));e.push_uniq(d),y||(t(document).bind("mousemove.__ue",g),t(document).bind("touchmove.__ue",f),t(document).bind("mouseup.__ue",g),t(document).bind("touchend.__ue",f),y=!0)}},add:function(e){var n,i,o,a,s=this,r=t.data(s,P),u=e.namespace,d=e.type;if(r&&(n=r.bound_ns_map,n[d]||(n[d]={}),u))for(i=u.split("."),o=0;o<i.length;o++)a=i[o],n[d][a]=!0},remove:function(e){var n,i,o,a=this,s=t.data(a,P),r=s.bound_ns_map,u=e.type,d=e.namespace;if(r[u]){if(!d)return delete r[u],void 0;for(n=d.split("."),i=0;i<n.length;i++)o=n[i],r[u][o]&&delete r[u][o];t.isEmptyObject(r[u])&&delete r[u]}},teardown:function(n){var i,o,a,s,r=this,u=t(r),d=t.data(r,P),l=d.bound_ns_map;if(t.isEmptyObject(l)){for(s=p(n),s.push_uniq("000"),i=0;i<s.length;i++)o=s[i],o&&(a=".__ue"+o,u.unbind("mousedown"+a),u.unbind("touchstart"+a),u.unbind("mousewheel"+a));t.removeData(r,P),e.remove_val(this),0===e.length&&(t(document).unbind("mousemove.__ue"),t(document).unbind("touchmove.__ue"),t(document).unbind("mouseup.__ue"),t(document).unbind("touchend.__ue"),y=!1)}}},_=function(e){var n,i=+new Date,a=e.motion_id,s=e.motion_map,r=e.bound_ns_map;delete s.idto_tapheld,s.do_allow_tap&&(s.px_end_x=s.px_start_x,s.px_end_y=s.px_start_y,s.ms_timestop=i,s.ms_elapsed=i-s.ms_timestart,r.uheld&&(n=t.Event("uheld"),t.extend(n,s),t(s.elem_bound).trigger(n)),r.uheldstart?(n=t.Event("uheldstart"),t.extend(n,s),t(s.elem_bound).trigger(n),o=a):delete b[a])},m=function(e){var n,i,o,u,d=e.motion_id,l=e.event_src,p=e.request_dzoom,m=t.data(e.elem,P),h=m.bound_ns_map,c=t(l.target),g=!1;if(!(b[d]||p&&!h.uzoomstart||c.is(m.ignore_class))){for(o=h.utap||h.uheld||h.uheldstart?!0:!1,i=q.pop();i;)c.is(i.selector_str)||t(e.elem).is(i.selector_str)?i.callback_match&&i.callback_match(e):i.callback_nomatch&&i.callback_nomatch(e),i=q.pop();return n={do_allow_tap:o,elem_bound:e.elem,elem_target:l.target,ms_elapsed:0,ms_timestart:l.timeStamp,ms_timestop:void 0,option_map:m,orig_target:l.target,px_current_x:l.clientX,px_current_y:l.clientY,px_end_x:void 0,px_end_y:void 0,px_start_x:l.clientX,px_start_y:l.clientY,timeStamp:l.timeStamp},b[d]=n,h.uzoomstart&&(p?a=d:s?r||(r=d,u=t.Event("uzoomstart"),g=!0):s=d,g)?(u=t.Event("uzoomstart"),n.px_delta_zoom=0,t.extend(u,n),t(n.elem_bound).trigger(u),void 0):((h.uheld||h.uheldstart)&&(n.idto_tapheld=setTimeout(function(){_({motion_id:d,motion_map:n,bound_ns_map:h})},m.held_tap_time)),void 0)}},h=function(e){var n,u,d,l,p,_,m,h,c=e.motion_id,g=e.event_src,f=!1;if(b[c]){if(n=b[c],u=n.option_map,d=u.bound_ns_map,n.timeStamp=g.timeStamp,n.elem_target=g.target,n.ms_elapsed=g.timeStamp-n.ms_timestart,n.px_delta_x=g.clientX-n.px_current_x,n.px_delta_y=g.clientY-n.px_current_y,n.px_current_x=g.clientX,n.px_current_y=g.clientY,n.timeStamp=g.timeStamp,n.do_allow_tap&&(Math.abs(n.px_delta_x)>u.px_radius||Math.abs(n.pd_delta_y)>u.px_radius||n.ms_elapsed>u.tap_time)&&(n.do_allow_tap=!1),s&&r&&(c===s||c===r)?(b[c]=n,m=b[s],h=b[r],p=Math.floor(Math.sqrt(Math.pow(m.px_current_x-h.px_current_x,2)+Math.pow(m.px_current_y-h.px_current_y,2))+.5),_=-1===w?0:(p-w)*$,w=p,f=!0):a===c&&d.uzoommove&&(_=n.px_delta_y*z,f=!0),f)return l=t.Event("uzoommove"),n.px_delta_zoom=_,t.extend(l,n),t(n.elem_bound).trigger(l),void 0;o===c?d.uheldmove&&(l=t.Event("uheldmove"),t.extend(l,n),t(n.elem_bound).trigger(l),g.preventDefault()):i===c&&d.udragmove&&(l=t.Event("udragmove"),t.extend(l,n),t(n.elem_bound).trigger(l),g.preventDefault()),i||o||!d.udragstart||n.do_allow_tap!==!1||(i=c,l=t.Event("udragstart"),t.extend(l,n),t(n.elem_bound).trigger(l),g.preventDefault(),n.idto_tapheld&&(clearTimeout(n.idto_tapheld),delete n.idto_tapheld))}},c=function(e){var n,u,d,l,p=e.motion_id,_=e.event_src,m=!1;S=!1,b[p]&&(n=b[p],u=n.option_map,d=u.bound_ns_map,n.elem_target=_.target,n.ms_elapsed=_.timeStamp-n.ms_timestart,n.ms_timestop=_.timeStamp,n.px_current_x&&(n.px_delta_x=_.clientX-n.px_current_x,n.px_delta_y=_.clientY-n.px_current_y),n.px_current_x=_.clientX,n.px_current_y=_.clientY,n.px_end_x=_.clientX,n.px_end_y=_.clientY,n.timeStamp=_.timeStamp,n.idto_tapheld&&(clearTimeout(n.idto_tapheld),delete n.idto_tapheld),d.utap&&n.ms_elapsed<=u.tap_time&&n.do_allow_tap&&(l=t.Event("utap"),t.extend(l,n),t(n.elem_bound).trigger(l)),p===i&&(d.udragend&&(l=t.Event("udragend"),t.extend(l,n),t(n.elem_bound).trigger(l),_.preventDefault()),i=void 0),p===o&&(d.uheldend&&(l=t.Event("uheldend"),t.extend(l,n),t(n.elem_bound).trigger(l)),o=void 0),p===a?(m=!0,a=void 0):p===s&&(r?(s=r,r=void 0,m=!0):s=void 0,w=-1),p===r&&(r=void 0,w=-1,m=!0),m&&d.uzoomend&&(l=t.Event("uzoomend"),n.px_delta_zoom=0,t.extend(l,n),t(n.elem_bound).trigger(l)),delete b[p])},f=function(t){var e,n,i,o,a=this,s=+new Date,r=t.originalEvent,u=r.changedTouches||[];switch(S=!0,t.timeStamp=s,t.type){case"touchstart":o=m;break;case"touchmove":o=h;break;case"touchend":o=c;break;default:o=null}if(o)for(e=0;e<u.length;e++)n=u[e],i="touch"+String(n.identifier),t.clientX=n.clientX,t.clientY=n.clientY,o({elem:a,motion_id:i,event_src:t})},g=function(t){var e,n=this,i="mouse"+String(t.button),o=!1;if(S)return t.stopImmediatePropagation(),void 0;if(t.shiftKey&&(o=!0),"mousemove"!==t.type&&0!==t.button)return!0;switch(t.type){case"mousedown":e=m,t.preventDefault();break;case"mouseup":e=c;break;case"mousemove":e=h,t.preventDefault();break;default:e=null}e&&e({elem:n,event_src:t,request_dzoom:o,motion_id:i})},x.ue=x.utap=x.uheld=x.uzoomstart=x.uzoommove=x.uzoomend=x.udragstart=x.udragmove=x.udragend=x.uheldstart=x.uheldmove=x.uheldend=n,t.ueSetGlobalCb=function(t,e,n){q.push({selector_str:t||"",callback_match:e||null,callback_nomatch:n||null})}}(jQuery),function(t){"use strict";var e=Math.floor,n=Math.min,i=Math.max;window.requestAnimationFrame=window.requestAnimationFrame||function(t){return setTimeout(t,10)},window.cancelAnimationFrame=window.cancelAnimationFrame||function(t){return clearTimeout(t)};var o=function(e,n){var i=this;this.el=e,this.$el=t(e),this.options=t.extend({},t.fn.udraggable.defaults,n),this.positionElement=this.options.positionElement||this.positionElement,this.getStartPosition=this.options.getStartPosition||this.getStartPosition,this.updatePositionFrameHandler=function(){delete i.queuedUpdate;var t=i.ui.position;i.positionElement(i.$el,i.started,t.left,t.top),i.options.dragUpdate&&i.options.dragUpdate.apply(i.el,[i.ui])},this.queuePositionUpdate=function(){i.queuedUpdate||(i.queuedUpdate=window.requestAnimationFrame(i.updatePositionFrameHandler))},this.init()};o.prototype={constructor:o,init:function(){var t=this;this.disabled=!1,this.started=!1,this.normalisePosition();var e=this.options.handle?this.$el.find(this.options.handle):this.$el;this.options.longPress?e.on("uheldstart.udraggable",function(e){t.start(e)}).on("uheldmove.udraggable",function(e){t.move(e)}).on("uheldend.udraggable",function(e){t.end(e)}):e.on("udragstart.udraggable",function(e){t.start(e)}).on("udragmove.udraggable",function(e){t.move(e)}).on("udragend.udraggable",function(e){t.end(e)})},destroy:function(){var t=this.options.handle?this.$el.find(this.options.handle):this.$el;t.off(".udraggable"),this.$el.removeData("udraggable")},disable:function(){this.disabled=!0},enable:function(){this.disabled=!1},option:function(){var t;if(0===arguments.length)return this.options;if(2===arguments.length)return this.options[arguments[0]]=arguments[1],void 0;if(1===arguments.length){if("string"==typeof arguments[0])return this.options[arguments[0]];if("object"==typeof arguments[0])for(t in arguments[0])arguments[0].hasOwnProperty(t)&&(this.options[t]=arguments[0][t])}this.options.containment&&this._initContainment()},normalisePosition:function(){var t=this.$el.position();this.$el.css({position:"absolute",top:t.top,left:t.left,right:"auto",bottom:"auto"})},start:function(t){if(!this.disabled){var e=this.getStartPosition(this.$el);return this._initContainment(),this.ui={helper:this.$el,offset:{top:e.y,left:e.x},originalPosition:{top:e.y,left:e.x},position:{top:e.y,left:e.x}},this.options.longPress&&this._start(t),this._stopPropagation(t)}},move:function(t){if(!this.disabled&&(this.started||this._start(t))){var e=t.px_current_x-t.px_start_x,n=t.px_current_y-t.px_start_y,i=this.options.axis;i&&"x"===i&&(n=0),i&&"y"===i&&(e=0);var o={left:this.ui.originalPosition.left,top:this.ui.originalPosition.top};i&&"x"!==i||(o.left+=e),i&&"y"!==i||(o.top+=n),this._applyGrid(o),this._applyContainment(o);var a=this.ui.position;return(o.top!==a.top||o.left!==a.left)&&(this.ui.position.left=o.left,this.ui.position.top=o.top,this.ui.offset.left=o.left,this.ui.offset.top=o.top,this.options.drag&&this.options.drag.apply(this.el,[t,this.ui]),this.queuePositionUpdate()),this._stopPropagation(t)}},end:function(t){return(this.started||this._start(t))&&(this.$el.removeClass("udraggable-dragging"),this.started=!1,this.queuedUpdate&&window.cancelAnimationFrame(this.queuedUpdate),this.updatePositionFrameHandler(),this.options.stop&&this.options.stop.apply(this.el,[t,this.ui])),this._stopPropagation(t)},_stopPropagation:function(t){return t.stopPropagation(),t.preventDefault(),!1},_start:function(t){return this._mouseDistanceMet(t)&&this._mouseDelayMet(t)?(this.started=!0,this.queuePositionUpdate(),this.options.start&&this.options.start.apply(this.el,[t,this.ui]),this.$el.addClass("udraggable-dragging"),!0):void 0},_mouseDistanceMet:function(t){return i(Math.abs(t.px_start_x-t.px_current_x),Math.abs(t.px_start_y-t.px_current_y))>=this.options.distance},_mouseDelayMet:function(t){return t.ms_elapsed>this.options.delay},_initContainment:function(){var e,n,i=this.options;return i.containment?i.containment.constructor===Array?(this.containment=i.containment,void 0):("parent"===i.containment&&(i.containment=this.$el.offsetParent()),e=t(i.containment),n=e[0],n&&(this.containment=[0,0,e.innerWidth()-this.$el.outerWidth(),e.innerHeight()-this.$el.outerHeight()]),void 0):(this.containment=null,void 0)},_applyGrid:function(t){if(this.options.grid){var n=this.options.grid[0],i=this.options.grid[1];t.left=e((t.left+n/2)/n)*n,t.top=e((t.top+i/2)/i)*i}},_applyContainment:function(t){var e=this.containment;e&&(t.left=n(i(t.left,e[0]),e[2]),t.top=n(i(t.top,e[1]),e[3]))},getStartPosition:function(t){return{x:parseInt(t.css("left"),10)||0,y:parseInt(t.css("top"),10)||0}},positionElement:function(t,e,n,i){t.css({left:n,top:i})}},t.fn.udraggable=function(e){var n=Array.prototype.slice.call(arguments,1),i=[];return this.each(function(){var a=t(this),s=a.data("udraggable");if(s||(s=new o(this,e),a.data("udraggable",s)),"string"==typeof e){if("function"!=typeof s[e])throw"jquery.udraggable has no '"+e+"' method";var r=s[e].apply(s,n);void 0!==r&&i.push(r)}}),i.length>0?i[0]:this},t.fn.udraggable.defaults={axis:null,delay:0,distance:0,longPress:!1,drag:null,start:null,stop:null}}(jQuery);