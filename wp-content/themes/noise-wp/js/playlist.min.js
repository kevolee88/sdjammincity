!function(t){t.extend(mejs.MepDefaults,{loopText:"Repeat",shuffleText:"Shuffle",nextText:"Next Track",prevText:"Previous Track",playAll:!1,beforeNext:function(){},afterNext:function(){},beforePrev:function(){},afterPrev:function(){},infoShow:function(){},infoHide:function(){}});var e=t("#tracks-info");t.extend(MediaElementPlayer.prototype,{buildicon:function(e,i){t('<div class="mejs-control mejs-icon entypo-music"/>').appendTo(i)},buildinfo:function(i,n){var a=this,s=t('<div class="mejs-control mejs-info entypo-arrow-down5"/>').appendTo(n).click(function(){s.hasClass("entypo-arrow-down5")?(s.removeClass("entypo-arrow-down5").addClass("entypo-arrow-up4"),e.stop(!0,!0).slideDown({duration:500,easing:"easeInOutExpo",complete:function(){a.options.infoShow()}})):(s.addClass("entypo-arrow-down5").removeClass("entypo-arrow-up4"),e.stop(!0,!0).slideUp({duration:500,easing:"easeInOutExpo",complete:function(){a.options.infoHide()}}))})},buildminimize:function(e,i){t('<div class="mejs-control mejs-minimize entypo-resize-shrink"/>').appendTo(i).click(function(){e.pause(),t("body").addClass("player-minimized"),t.colorbox.close()})},buildloop:function(e,i){var n=t('<div class="mejs-control mejs-loop entypo-loop" title="'+this.options.loopText+'" />').appendTo(i).click(function(){n.toggleClass("active"),e.options.loop=!e.options.loop})},loopToggle:function(){this.options.loop=!this.options.loop},buildshuffle:function(e,i){var n=t('<div class="mejs-control mejs-shuffle entypo-shuffle" title="'+this.options.shuffleText+'" />').appendTo(i).click(function(){n.toggleClass("active"),e.options.shuffle=!e.options.shuffle})},shuffleToggle:function(){this.options.shuffle=!this.options.shuffle},buildprev:function(e,i){this.prevTrack=t('<div class="mejs-control mejs-prev entypo-previous" title="'+this.options.prevText+'" />').appendTo(i).click(function(){e.playPrevTrack()})},buildnext:function(e,i){this.nextTrack=t('<div class="mejs-control mejs-next entypo-next" title="'+this.options.nextText+'" />').appendTo(i).click(function(){e.playNextTrack()})},buildplaylist:function(e,i,n,a){this.playlist=t("#mejs-playlist");var s=this.playlist.find("li.current");s.length||(s=this.playlist.find("li:first").addClass("current")),this.currentTrack=s,t("#track-info-"+s.data("id")).addClass("current"),e.options.playAll&&a.addEventListener("ended",function(){e.playNextTrack()},!1)},buildtracktitle:function(e,i){this.trackTitle=t('<div class="mejs-tracktitle"/>').appendTo(i),this.updateTrackTitle(),t(".mejs-tracktitle ").bind("marquee",function(){var e=t(this).children("div");e.css({right:-e.width()}),e.animate({right:e.parent().width()},1e4,"linear",function(){e.trigger("marquee")})})},buildrating:function(e,i){this.trackRating=t('<div class="mejs-rating vertical"/>').appendTo(i),this.trackRating.append('<span class="entypo-heart"/>'),this.trackRating=t('<div class="vote-ui"/>').appendTo(this.trackRating),this.updateTrackRating()},updateTrackTitle:function(){if("undefined"!=typeof this.trackTitle){var t=this.currentTrack.attr("title");this.trackTitle.html("<div>"+t+"</div>").attr("title",t),this.setControlsSize(),this.trackTitle.width()<this.trackTitle.children("div").width()&&this.trackTitle.children("div").trigger("marquee")}},updateTrackRating:function(){if("undefined"!=typeof this.trackRating){var t=this.currentTrack.data("rate"),e=this.currentTrack.data("nonce"),i=this.currentTrack.data("id"),n=new Array;this.trackRating.data({id:i,nonce:e}),this.trackRating.attr("class","").addClass("vote-ui track-vote-"+i),e?this.trackRating.removeClass("track-voted"):this.trackRating.addClass("track-voted");for(var a=1;5>=a;a++)t>=a?n.push('<span class="entypo-heart heart"></span>'):n.push('<span class="entypo-heart2 heart"></span>');this.trackRating.html(n.join(""))}},playNextTrack:function(){var t,e=this,i=e.playlist.find("li"),n=i.filter(".current"),a=i.not(".played");if(a.length<1&&(i.removeClass("played"),a=i.not(".current")),e.options.shuffle){var s=Math.floor(Math.random()*a.length);t=a.eq(s)}else t=n.next(),t.length<1&&e.options.loop&&(t=n.siblings().first());1==t.length&&(e.options.beforeNext(e),t.addClass("played"),e.playTrack(t),e.options.afterNext(e))},playPrevTrack:function(){var t,e=this,i=e.playlist.find("li"),n=i.filter(".current"),a=i.filter(".played").not(".current");if(a.length<1&&(n.removeClass("played"),a=i.not(".current")),e.options.shuffle){var s=Math.floor(Math.random()*a.length);t=a.eq(s)}else t=n.prev(),t.length<1&&e.options.loop&&(t=n.siblings().last());1==t.length&&(e.options.beforePrev(e),n.removeClass("played"),e.playTrack(t),e.options.afterPrev(e))},playTrack:function(e){var i=this;i.setCurrentTrack(e),i.updateTrackTitle(),i.updateTrackRating(),i.pause(),i.setSrc(e.data("url")),i.load(),i.play(),t("#track-info-"+e.data("id")).addClass("current").siblings().removeClass("current")},setCurrentTrack:function(t){return"undefined"==typeof t?(this.currentTrack=this.playlist.children("li:first").addClass("current").siblings().removeClass("current"),void 0):(this.currentTrack=t,t.addClass("current").siblings().removeClass("current"),void 0)}})}(mejs.$);