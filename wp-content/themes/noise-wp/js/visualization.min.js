var Noise=Noise||{};Noise.Spectrum=function(e){function t(){var e=new Uint8Array(o.frequencyBinCount);o.getByteFrequencyData(e),d.clearRect(0,0,a.width,a.height),d.fillStyle=i;var t,n,r,f,s,l=Math.floor(a.width/c),w=Math.floor(e.length/l);for(n=0;l>n;++n){for(t=0,r=0;w>r;++r)t+=e[n*w+r];f=t/w,s=f/256*a.height,d.fillRect(n*c,a.height,c-u,-s)}}var n,i="#fff";if(window.AudioContext=window.AudioContext||window.webkitAudioContext,"undefined"==typeof webkitAudioContext)return{settings:{},init:function(){}};n=new AudioContext;var o=n.createAnalyser();o.smoothingTimeConstant=.3,o.fftSize=512,o.connect(n.destination);var r=n.createScriptProcessor(2048,1,1);r.connect(n.destination);var a,d,c=10,u=2,f={settings:{canvas:"visualization",audio:"extended-player",fill:i},init:function(c){if("undefined"!=typeof window.webkitAudioContext){var c=e.extend({},f.settings,c),u=n.createMediaElementSource(document.getElementById(c.audio));u.connect(o),a=document.getElementById(c.canvas),d=a.getContext("2d"),i=c.fill,r.onaudioprocess=t}}};return f}(jQuery);